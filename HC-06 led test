#include <io.h>
#include <mega128.h>
#include <delay.h>

char rx_char(void) 
{
    while((UCSR0A&0x80) == 0); 
    return UDR0; 
}

void tx_char(char tx_data)
{
    while((UCSR0A&0x20) == 0); 
    UDR0 = tx_data; 
}

int main(void)
{
    char i, data;

    DDRG = 0xff;             //내장 LED

    UCSR0A = 0x00; 
    UCSR0B = 0x98;
    UCSR0C = 0x06;
    UBRR0H = 0x00;
    UBRR0L = 103;            // 9600 BR

while(1)
{   
    data = rx_char();  

    tx_char(data);           //받은데이터를 그대로 전송해줌으로인해서 데이터가 잘 도착했는지 확인한다

     if(data=='1')  
     {
        PORTG=0x01; 
     }
     
     if(data=='2')   
     {
        PORTG=0x00;
     }
 
}
    return 0;
}
